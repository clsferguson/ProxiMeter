{% extends "base.html" %}

{% block title %}ProxiMeter - RTSP Stream Manager{% endblock %}

{% block header_class %}header-landing{% endblock %}

{% block content %}
<main class="container">
  <!-- Primary action: Add stream button -->
  <div class="actions">
    <a href="/streams/new" class="btn btn-primary" id="add-stream-btn">
      Add Stream
    </a>
  </div>

  <!-- Stream list area -->
  <div class="streams-container" id="streams-list" role="region" aria-label="Stream list">
    {% if streams and streams|length > 0 %}
      <!-- Stream grid with equal-width buttons -->
      <div class="stream-grid" id="streams-grid" role="list" aria-live="polite">
        {% for stream in streams %}
        <div class="stream-item" 
             data-stream-id="{{ stream.id }}" 
             role="listitem"
             tabindex="0"
             aria-label="Stream: {{ stream.name }}{% if stream.status == 'Inactive' %}, Inactive{% endif %}">
          <a href="/play/{{ stream.id }}" 
             class="stream-button"
             aria-label="Play {{ stream.name }}">
            <div class="stream-name">{{ stream.name }}</div>
            {% if stream.status == "Inactive" %}
            <div class="stream-status inactive" role="status" aria-label="Stream is inactive">âš  Inactive</div>
            {% endif %}
          </a>
          <div class="stream-actions" role="group" aria-label="Stream actions for {{ stream.name }}">
            <button class="btn-icon drag-handle" 
                    title="Drag to reorder" 
                    aria-label="Drag {{ stream.name }} to reorder"
                    tabindex="0">
              â˜°
            </button>
            <a href="/streams/{{ stream.id }}/edit" 
               class="btn-icon" 
               title="Edit stream" 
               aria-label="Edit {{ stream.name }}">
              âœŽ
            </a>
            <button class="btn-icon delete-btn" 
                    data-stream-id="{{ stream.id }}" 
                    data-stream-name="{{ stream.name }}"
                    title="Delete stream" 
                    aria-label="Delete {{ stream.name }}"
                    tabindex="0">
              ðŸ—‘
            </button>
          </div>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <!-- Empty state -->
      <div class="empty-state" id="empty-state" role="status" aria-live="polite">
        <p>No streams configured yet.</p>
        <p class="hint">Click "Add Stream" to get started.</p>
      </div>
    {% endif %}
  </div>
</main>
{% endblock %}