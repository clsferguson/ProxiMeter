{% extends "base.html" %}

{% block title %}Edit Stream - ProxiMeter{% endblock %}

{% block header_class %}header-playing{% endblock %}

{% block content %}
<div class="form-container">
  <h2>Edit Stream</h2>
  
  {% if error %}
  <div class="error-banner">
    {{ error }}
  </div>
  {% endif %}
  
  <form method="POST" action="/streams/{{ stream.id }}/edit" class="stream-form">
    <div class="form-group">
      <label for="name">Stream Name</label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        value="{{ name or stream.name }}"
        required 
        minlength="1" 
        maxlength="50"
        placeholder="e.g., Front Door Camera"
      >
      <span class="form-help">1-50 characters, must be unique (case-insensitive)</span>
    </div>
    
    <div class="form-group">
      <label for="rtsp_url">RTSP URL</label>
      <input 
        type="text" 
        id="rtsp_url" 
        name="rtsp_url" 
        value="{{ rtsp_url or stream.rtsp_url }}"
        required 
        placeholder="rtsp://username:password@192.168.1.100:554/stream"
      >
      <span class="form-help">Must start with rtsp:// and include host</span>
      <span class="form-warning">âš  Credentials stored in plaintext (LAN-only deployment)</span>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Save Changes</button>
      <a href="/" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
  
  <div class="notice" style="margin-top: 2rem;">
    <strong>Note:</strong> If you change the RTSP URL, the stream will be re-validated. 
    The stream status will be set to Active if reachable, or Inactive if not.
  </div>
</div>
{% endblock %}
